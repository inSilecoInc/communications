[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Risk-based timing windows calculator",
    "section": "",
    "text": "0.1 Outline",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Project description</span>"
    ]
  },
  {
    "objectID": "index.html#outline",
    "href": "index.html#outline",
    "title": "Risk-based timing windows calculator",
    "section": "",
    "text": "Introduction\n\nDescription: Introduce the importance of cumulative risk assessments (CEAs) for ecosystem-based management and the challenges in operationalizing them for decision-making. Highlight the dual objectives of minimizing risks from human interventions and maximizing outcomes from management interventions. State the novelty of a spatio-temporal risk-based framework for optimizing interventions.\n\nBackground\n\nDescription: Provide an overview of CEAs, risk-based frameworks, and their applications. Discuss existing challenges in integrating spatial and temporal dimensions in risk assessments. Include examples of previous applications and highlight the research gaps this work addresses.\n\nMethods\n\nDescription: Outline the cumulative risk assessment framework, including the mathematical model and its components. Detail data requirements for applying the model, covering stressors, species, life processes, and sensitivities. Include the operational workflow for generating outputs and optimizing interventions in space, time, or space-time.\n\nFictitious Examples\n\nDescription: Present two fictitious examples to illustrate the framework:\n\nFreshwater Stream: Lake trout, yellow perch, and cisco with stressors from dredging and agricultural runoff.\nBoreal Forest: Woodland caribou and moose with stressors from forestry and road disturbances.\n\nHighlight how cumulative risks are calculated and outputs are used to identify optimal interventions.\n\nCase Study\n\nDescription: Showcase a simplified real-world application of the framework using openly available data. Focus on either spatial or temporal optimization (not both) to demonstrate the framework’s practicality. Provide details on the selected ecosystem, species, stressors, and the resulting outputs.\n\nResults\n\nDescription: Present the outputs from the fictitious examples and case study. For the fictitious examples, include cumulative risk maps or tables illustrating optimal timing windows and spatial hotspots. For the case study, include specific insights gained from the real-world data.\n\nDiscussion\n\nDescription: Discuss the broader implications of the framework for ecosystem-based management. Highlight its versatility in addressing diverse challenges, from minimizing human impacts to prioritizing conservation efforts. Compare findings to previous studies and frameworks. Address limitations, such as data availability and computational requirements.\n\nConclusion\n\nDescription: Summarize the key findings and contributions of the framework. Reiterate its dual focus on optimizing human and management interventions. Suggest future research directions, including expanding the framework to fully integrate spatio-temporal dynamics.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Project description</span>"
    ]
  },
  {
    "objectID": "background_tw.html",
    "href": "background_tw.html",
    "title": "2  Background - Timing Windows",
    "section": "",
    "text": "Cumulative effects assessments (CEAs) are essential tools for ecosystem-based management, addressing the combined impacts of multiple stressors on ecosystems, habitats, and species. Despite their significance, CEAs often remain disconnected from decision-making processes, limiting their utility for real-world environmental management (Stelzenmüller et al., 2018, 2020). Risk-based frameworks have been proposed to bridge this gap, streamlining the integration of scientific findings into policy and enabling more effective mitigation strategies (Stelzenmüller et al., 2018). Applications of these frameworks include dredging projects (Suedel et al., 2008), watershed assessments (Wilson, 2021), and marine management (Holsman et al., 2017). However, many CEAs remain constrained to broad theoretical frameworks, with limited operational tools for spatio-temporal assessments.\nMap-based risk assessments represent a promising operational method for assessing timing windows, where human activities can be strategically planned to minimize ecological risks. These approaches combine data on human activities, ecological processes, and environmental factors to produce spatio-temporal risk maps that guide intervention planning (Pla et al., 2024; Li et al., 2021). Such tools have demonstrated value in biodiversity conservation (Pla et al., 2024), coastal management (Arkema et al., 2014), and disease risk evaluation (Arevalo-Nieto et al., 2022).\nFuture research needs include operationalizing CEAs to evaluate multiple stressors on wildlife populations (Tyack et al., 2022), communicating uncertainty effectively (Stelzenmüller et al., 2020), and identifying the optimal timing for human interventions. These research gaps form the foundation for developing a timing windows risk calculator based on a spatio-temporal cumulative risk assessment approach.\nBuilding on Stelzenmüller et al. (2018, 2020), this project aligns with their call for streamlined CEAs. Inspired by Halpern et al. (2008), it adopts a cumulative risk mapping approach and extends it to temporal dynamics. The project also seeks to integrate insights from Suedel et al. (2008) and others on timing windows, creating an operational framework for managing interventions in ecosystems.\nThe specific objectives of this project are:\n\nOperationalize CEAs: Extend existing risk-based frameworks to produce actionable outputs for decision-makers.\n\nDevelop Spatio-Temporal Assessments: Incorporate spatial and temporal datasets to evaluate risks dynamically.\n\nIdentify Optimal Timing Windows: Use map-based risk assessments to determine the least impactful periods for human interventions.\n\nLeverage Open Data: Integrate openly available datasets for stressors, species life processes, and habitat sensitivities.\n\nSupport Adaptive Management: Provide tools to assess timing windows for diverse ecosystems and intervention types.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Background - Timing Windows</span>"
    ]
  },
  {
    "objectID": "background.html",
    "href": "background.html",
    "title": "3  Background",
    "section": "",
    "text": "Cumulative effects assessments (CEAs) are critical tools for ecosystem-based management, enabling the evaluation of combined impacts from multiple stressors on ecosystems, habitats, and species. While CEAs are widely recognized for their importance, they often remain disconnected from practical decision-making processes, limiting their application in real-world environmental management scenarios (Stelzenmüller et al., 2018, 2020). Recent advancements in risk-based frameworks have sought to bridge this gap by integrating scientific findings into policy and operational tools. These frameworks emphasize evaluating both the likelihood and consequences of stressor impacts, allowing for targeted interventions and resource allocation (Bharadwaj et al., 2012; Wang et al., 2018).\nRisk-based approaches have been applied across sectors, including asset management (Tan & Ong, 2021), infrastructure maintenance (Otal & Bakulev, 2014), and environmental management (Stelzenmüller et al., 2018). In the context of ecosystem-based management, these approaches enable decision-makers to prioritize actions by assessing cumulative risks at multiple scales. For example, risk-based CEAs have been used to identify optimal timing windows for human activities (e.g., dredging, construction) (Suedel et al., 2008) and to guide conservation efforts in biodiversity hotspots (Pla et al., 2024). Multi-criteria decision-making techniques, such as those described by Karunathilake et al. (2020), further enhance these frameworks by addressing conflicting priorities and uncertainties in risk assessments.\nThis project proposes a cumulative risk-based approach to optimize decision-making and interventions in natural systems, supporting two complementary objectives: 1) minimizing the risk of human interventions by identifying time periods and/or spatial locations where planned activities will have the least impact, and 2) maximizing the outcomes of management interventions by targeting areas or periods of heightened ecological risk. Unlike traditional CEAs, which often focus solely on spatial or temporal dimensions, this project expands the scope to include spatial, temporal, and spatio-temporal analyses. By enabling assessments to optimize space, time, or space-time windows, the framework offers unparalleled flexibility in addressing diverse management challenges. Building on advancements in risk-based CEAs and inspired by the foundational framework proposed by Halpern et al. (2008), this project extends cumulative risk mapping to support dynamic spatio-temporal analyses, positioning itself as a comprehensive tool for optimizing interventions in natural systems while advancing sustainable development and conservation goals.\nThe specific objectives of this project are:\n\nOperationalize Risk-Based CEAs: Develop actionable tools that integrate cumulative risks into decision-making processes for natural systems.\nSupport Multi-Dimensional Analyses: Enable assessments that optimize spatial, temporal, or spatio-temporal windows for interventions.\nMinimize and Maximize Risk:\n\nMinimize risk in the context of planned human activities to reduce environmental impacts.\nMaximize risk to identify ecological hotspots and prioritize management actions.\n\nLeverage Open Data: Utilize openly available datasets on stressors, species, life processes, and habitat sensitivities to ensure broad applicability.\nFacilitate Adaptive Management: Provide flexible tools for a range of ecosystems and intervention types, ensuring adaptability to changing conditions and data availability.",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Background</span>"
    ]
  },
  {
    "objectID": "methods.html",
    "href": "methods.html",
    "title": "4  Methods",
    "section": "",
    "text": "4.1 Cumualtive risk assessment\nWhether the assessment is integrated and spatio-temporal or non-integrated and strictly temporal, the risk assessment model remains the same and requires the same types of inputs: knowledge of environmental stressors arising from human activities, species life processes (e.g., spawning, migration, and rearing), and the sensitivity of species life processes to these stressors. However, the type and quality of knowledge required will differ depending on the assessment context.",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Methods</span>"
    ]
  },
  {
    "objectID": "methods.html#cumualtive-risk-assessment",
    "href": "methods.html#cumualtive-risk-assessment",
    "title": "4  Methods",
    "section": "",
    "text": "4.1.1 Model\nThe model evaluates cumulative risk by additively combining the risks of all individual stressor-life process combinations, based on the framework proposed byhalpern2008? for assessing cumulative effects in the world’s oceans. The simplest form of the model is as follows:\n\\(Rc_t = \\sum_i \\sum_j S_{i,t} \\cdot Sp_{j,t} \\cdot \\sum_k L_{j,k,t} \\cdot \\mu_{i,k}\\)\nWhere: - \\(Rc_t\\): Cumulative risk score at time \\(t\\), - \\(S_{i,t}\\): Presence or intensity of stressor \\(i\\) at time \\(t\\), - \\(Sp_{j,t}\\): Presence of species \\(j\\) at time \\(t\\), - \\(L_{j,k,t}\\): Presence of life process \\(k\\) of species \\(j\\) at time \\(t\\), - \\(\\mu_{i,k}\\): Sensitivity of life process \\(k\\) to stressor \\(i\\).\nThe model can also be strictly spatial, swapping out time (\\(t\\)) for space (\\(x\\)) to incorporate the spatial distribution (\\(x\\)) of stressors, species, and life processes:\n\\(Rc_x = \\sum_i \\sum_j S_{i,x} \\cdot Sp_{j,x} \\cdot \\sum_k L_{j,k,x} \\cdot \\mu_{i,k}\\)\nHere, data on stressors and species life processes are now characterized in location \\(x\\), typically denoting a cell in a regular grid delineating an area of interest.\nIn its most complex form, the model incorporates both time (\\(t\\)) and space (\\(x\\)), as well as the sensitivity of habitats where life processes occur:\n\\(Rc_{t,x} = \\sum_i \\sum_j S_{i,t,x} \\cdot Sp_{j,t,x} \\cdot \\sum_k L_{j,k,t,x} \\cdot \\overline{\\mu_i}\\)\nHere, data on stressors and species life processes are now characterized at time \\(t\\) in location \\(x\\). \\(\\overline{\\mu_i}\\) represents the joint sensitivity of a life process \\(k\\) and its associated habitat \\(l\\) to stressor \\(i\\), calculated as:\n\\(\\overline{\\mu_i} = w \\cdot \\mu_{i,k} + (1 - w) \\cdot \\mu_{i,l}\\)\nWhere: - \\(\\mu_{i,k}\\): Sensitivity of life process \\(k\\) to stressor \\(i\\), - \\(\\mu_{i,l}\\): Sensitivity of habitat \\(l\\) to stressor \\(i\\), - \\(w\\): Weighting factor (default \\(w = 0.5\\)), representing the relative importance of life process and habitat sensitivity.\nThe default equal weighting (\\(w = 0.5\\)) assumes that life process and habitat sensitivities contribute equally to the overall risk calculation. This assumption can be adjusted based on specific ecosystem or management needs.\n\n\n4.1.2 Data Requirements\nTo operationalize the risk assessment model, a variety of datasets are required to represent human activities, environmental stressors, species, life processes, and the sensitivities of species and habitats to stressors. These datasets must be spatially and/or temporally explicit to ensure compatibility with the chosen risk assessment framework. By combining these datasets, the risk assessment model can comprehensively evaluate cumulative risks and provide actionable outputs for integrated ecosystem management or for project-specific environmental assessments.\n\n4.1.2.1 Human Activities and Environmental Stressors\n\nDescription: Data on human activities and their associated environmental stressors form the basis of the risk assessment, providing information on the sources of potential ecological impacts.\nRequirements:\n\nSpatial and Temporal Presence:\n\nLocation of activities or stressors (e.g., point, line, or grid-based spatial data).\nTiming and duration of activities or stressors (e.g., daily, seasonal, or annual presence).\n\nIntensity:\n\nQuantitative metrics such as pollutant concentrations, sound levels, or habitat modification intensity.\n\nExamples:\n\nDredging operations (location and timing of activities).\nShipping traffic (routes and temporal activity patterns).\nIndustrial discharges (pollutant types and concentrations).\n\n\nFormats:\n\nTabular data with spatial and temporal columns (e.g., cell IDs, dates).\nRaster or vector datasets representing stressor distribution (e.g., noise maps, pollutant layers).\n\n\n\n\n4.1.2.2 Species and Their Presence\n\nDescription: Data on the presence and distribution of species form a critical layer for assessing cumulative risks, representing the ecological components affected by stressors.\nRequirements:\n\nPresence/Absence:\n\nSpatial data on the occurrence of species (e.g., habitat ranges, species distribution models).\n\nAbundance (if available):\n\nQuantitative data on population density or biomass.\n\nTemporal Dynamics:\n\nSeasonal patterns or migratory timings where applicable.\n\nExamples:\n\nFish telemetry data for migration patterns.\nSpecies distribution maps for terrestrial or aquatic species.\n\n\nFormats:\n\nSpatial polygons or raster layers for habitat ranges.\nTemporal datasets linked to spatial occurrences (e.g., time-series of species presence).\n\n\n\n\n4.1.2.3 Life Processes of Species\n\nDescription: Life processes such as spawning, migration, feeding, or rearing are key ecological activities that interact with stressors to produce risks.\nRequirements:\n\nIdentification of Life Processes:\n\nDetailed documentation of species-specific life processes (e.g., spawning periods, feeding grounds).\n\nSpatial and Temporal Presence:\n\nLocations and timing of life processes.\n\nExamples:\n\nSpawning areas for fish during specific months.\nMigration corridors for birds or mammals.\n\n\nFormats:\n\nTabular datasets linking species and life processes to spatial and temporal dimensions.\nSpatial layers representing critical habitats (e.g., polygons for spawning grounds).\n\n\n\n\n4.1.2.4 Sensitivity of Life Processes and Habitats to Stressors\n\nDescription: Sensitivity metrics quantify the degree to which species life processes and habitats are affected by specific stressors.\nRequirements:\n\nLife Process Sensitivities (\\(\\mu_{i,k}\\)):\n\nQuantitative measures of how stressors (e.g., noise, pollution) impact specific life processes (e.g., reproduction, migration).\nExamples: Sensitivity scores for noise disruption during migration or sedimentation during spawning.\n\nHabitat Sensitivities (\\(\\mu_{i,l}\\)):\n\nQuantitative measures of how stressors affect habitats supporting life processes.\nExamples: Habitat degradation scores due to industrial discharges or dredging.\n\nCombined Sensitivity (\\(\\overline{\\mu_i}\\)):\n\nJoint sensitivities calculated using weighting factors (\\(w\\)) to balance the relative importance of life process and habitat sensitivities.\n\n\nFormats:\n\nSensitivity matrices linking stressors to life processes and habitats (e.g., species-stressor sensitivity tables).\nLookup tables or raster layers for habitat vulnerability indices.\n\n\n\n\n4.1.2.5 Summary of Data Needs\n\n\n\n\n\n\n\n\nCategory\nKey Data Elements\nExample Formats\n\n\n\n\nHuman Activities/Stressors\nSpatial and temporal presence, intensity of stressors\nTabular (cell IDs, dates), raster\n\n\nSpecies\nSpecies presence/absence, abundance, temporal dynamics\nSpatial polygons, time-series\n\n\nLife Processes\nIdentification, spatial and temporal patterns\nTabular (linked to species), polygons\n\n\nLife Process Sensitivities\nSensitivity of life processes to stressors\nSensitivity matrices, lookup tables\n\n\nHabitat Sensitivities\nSensitivity of habitats to stressors\nRaster layers, vulnerability indices\n\n\n\n\n\n\n4.1.3 Outputs\nThe outputs of the cumulative risk assessment are designed to accommodate a range of analytical needs, providing flexibility for strictly temporal, strictly spatial, and spatio-temporal analyses. These outputs support both exploratory visualization and computational workflows, ensuring adaptability to diverse management and decision-making contexts across time, space, or both depending on the quality of available data or the goal of the assessment.\n\n4.1.3.1 Temporal Outputs\nFor scenarios where spatial data are unavailable or unnecessary, the risk assessment provides strictly temporal outputs that focus on aggregated cumulative risks over time or risk scores for particular species, life processes, or stressors.\nTabular Outputs Structure:\n'data.frame':   n obs. of  5 variables:\n$ date         : Date, format: \"2024-01-01\"  # Datetime `t`\n$ species      : numeric  # Species ID `Sp`\n$ life_process : numeric  # Life process ID `L`\n$ stressor     : numeric  # Stressor ID `S`\n$ risk         : numeric  # Risk score `R_c` from stressor `i` for species `j` and life process `k` at time `t`\nUse Cases: - Optimal Timing Windows: Identify time periods with minimal or maximal cumulative risks for planned interventions. - Trend Analysis: Examine fluctuations in risk over time for specific species, life processes, or stressors. - Simplified Decision Support: Enable analysis when spatial data are unavailable.\n\n\n4.1.3.2 Spatial Outputs\nThe framework also supports strictly spatial outputs, which summarize cumulative risks across geographic areas without accounting for temporal dimensions. The outputs of these types of assessment provide static spatial risk maps of an area of interest showing aggregated cumulative risk scores or risk scores for particular species, life processes, or stressors.\nTabular Outputs Structure:\n'data.frame':   n obs. of  5 variables:\n$ cell         : numeric  # Unique cell ID `x`\n$ species      : numeric  # Species ID `Sp`\n$ life_process : numeric  # Life process ID `L`\n$ stressor     : numeric  # Stressor ID `S`\n$ risk         : numeric  # Risk score `R_c` from stressor `i` for species `j` and life process `k` in cell `x`\nUse Cases: - Spatial Risk Mapping: Identify geographic areas with the highest or lowest cumulative risks. - Hotspot Detection: Pinpoint regions requiring urgent management or protection efforts. - Route Optimization: Select low-risk routes for interventions like navigation or infrastructure placement.\n\n\n4.1.3.3 Spatio-Temporal Outputs\nFor comprehensive analyses, the framework generates spatio-temporal outputs, integrating risk scores across both spatial and temporal dimensions. The outputs of these types of assessment provide dynamic spatial risk maps of aggregated cumulative risk scores or risk scores for particular species, life processes, or stressors that highlights cumulative risks over time and space in an area of interest.\nTabular Outputs Structure:\n'data.frame':   n obs. of  6 variables:\n$ cell         : numeric  # Unique cell ID `x`\n$ date         : Date, format: \"2024-01-01\"  # Datetime `t`\n$ species      : numeric  # Species ID `Sp`\n$ life_process : numeric  # Life process ID `L`\n$ stressor     : numeric  # Stressor ID `S`\n$ risk         : numeric  # Risk score `R_c` from stressor `i` for species `j`, and life process `k` at time `t` and in cell `x`\nUse Cases: - Space-Time Optimization: Identify optimal periods and locations for interventions with minimal or maximal risks. - Risk Dynamics Analysis: Evaluate how risks vary spatially and temporally to prioritize management actions. - Integrated Decision Support: Combine spatial and temporal insights for holistic ecosystem management.",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Methods</span>"
    ]
  },
  {
    "objectID": "methods.html#space-time-optimization",
    "href": "methods.html#space-time-optimization",
    "title": "4  Methods",
    "section": "4.2 Space-Time Optimization",
    "text": "4.2 Space-Time Optimization\nThis section of the project focuses on identifying optimal periods and/or spatial locations for human or management interventions based on the outputs of cumulative risk assessments. The goal is to optimize decision-making by analyzing risks across time, space, or both, tailored to the context of integrated ecosystem management.\nSpace-time optimization supports two primary objectives:\n\nMinimizing Risk (Human Interventions): Identifying time and/or locations where planned activities will have the least impact on ecosystems.\nMaximizing Risk (Management Interventions): Pinpointing time and/or locations where management actions should focus to address the highest risks.\n\nThese objectives provide flexibility for diverse use cases, such as selecting low-impact periods for construction projects or targeting conservation efforts in risk hotspots.\nThe tool provides three optimization dimensions:\n\nTime: For strictly temporal assessments, the optimization identifies periods of minimal or maximal cumulative risk based on the planned duration of activities. If activities can be split into smaller chunks, the tool also accounts for chunk sizes and identifies non-contiguous periods of low or high risk.\nSpace: For spatial optimization, the focus is on identifying geographic areas that minimize or maximize cumulative risk scores, depending on the objective.\nSpace-Time: This integrates both temporal and spatial dimensions, finding regions and periods that jointly minimize or maximize cumulative risks.\n\nThe following table summarizes potential approaches and tools for optimizing time, space, and space-time windows:\n\n\n\n\n\n\n\n\n\nDimension\nObjective\nApproach\nTools/Algorithms\n\n\n\n\nTime\nMinimize or Maximize\n- Sliding window for rolling sums over cumulative risk. - Dynamic programming for splitting periods.\n- rollapply (zoo) for flexibility. - RcppRoll for high-performance rolling operations. - Dynamic programming for complex constraints.\n\n\nSpace\nMinimize or Maximize\n- Risk surface analysis to identify low/high-risk areas. - Pathfinding for optimal routes in low-risk areas.\n- terra for raster operations. - igraph for graph-based traversal (e.g., Dijkstra’s or A*).\n\n\nSpace-Time\nMinimize or Maximize\n- Spatio-temporal clustering to identify contiguous low/high-risk regions. - Optimization frameworks for dynamic spatio-temporal allocation.\n- DBSCAN for clustering. - lpSolve or ompr for optimization frameworks.\n\n\n\nHere are the potential outputs for each optimization dimension:\n\nTime Optimization: A ranked list or table of time periods with the lowest or highest cumulative risk scores for a specified duration or chunk size.\nSpace Optimization: Raster or vector maps highlighting areas with minimal or maximal cumulative risks, including options for identifying routes or spatial clusters.\nSpace-Time Optimization: Combined outputs presenting optimal spatio-temporal windows, such as maps with interactive overlays or animations showing risk dynamics over time.",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Methods</span>"
    ]
  },
  {
    "objectID": "fictitious_examples.html",
    "href": "fictitious_examples.html",
    "title": "5  Fictitious examples",
    "section": "",
    "text": "5.1 Freshwater Stream Example: Fish Species and Stressors\nIn this example, we focus on a freshwater stream ecosystem, home to three fish species: lake trout (Salvelinus namaycush), yellow perch (Perca flavescens), and cisco (Coregonus artedi). These species are of significant ecological and economic importance. The selected life processes—spawning, natal, and rearing—are critical to their reproductive success and population stability.\nStressors:",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Fictitious examples</span>"
    ]
  },
  {
    "objectID": "fictitious_examples.html#freshwater-stream-example-fish-species-and-stressors",
    "href": "fictitious_examples.html#freshwater-stream-example-fish-species-and-stressors",
    "title": "5  Fictitious examples",
    "section": "",
    "text": "Lake Trout: A top predator in the lake ecosystem, lake trout are sensitive to environmental changes. They are known to spawn in shallow, cold-water environments in the fall. The rearing process occurs in deeper waters, where juveniles grow before moving to adult habitats. Spawning habitat disruption due to sedimentation can severely impact the species’ reproductive success.\nYellow Perch: This species is a key prey item for larger fish and is also commercially valuable. Yellow perch spawn in early spring, often in shallow areas of the stream. Their eggs and larvae are vulnerable to sedimentation, which can smother eggs and reduce larval survival. The rearing process, occurring in the stream’s vegetated areas, can also be affected by sedimentation and contaminants, particularly from agricultural runoff.\nCisco: Ciscoes are pelagic fish that play a significant role in the food web. They spawn in deep waters during the fall, and their juvenile rearing areas are in the upper layers of the water column. Cisco are particularly vulnerable to contaminants, as these substances can accumulate in their tissues, affecting both their health and the success of their offspring.\n\n\n\nSedimentation from Dredging: Dredging activities in the stream disturb the riverbed, releasing fine sediments that can smother fish eggs, disrupt spawning grounds, and negatively impact water quality. Sedimentation also harms the rearing habitats for yellow perch and lake trout by reducing water clarity and oxygen levels.\nContaminants from Agricultural Runoff: Agricultural runoff, including pesticides and fertilizers, introduces toxic substances into the water, affecting species health and reproductive success. These contaminants, particularly nitrates and phosphates, can lead to eutrophication, reducing oxygen levels and impairing the development of fish larvae, especially for species like the yellow perch and cisco.",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Fictitious examples</span>"
    ]
  },
  {
    "objectID": "fictitious_examples.html#boreal-forest-example-woodland-caribou-and-moose",
    "href": "fictitious_examples.html#boreal-forest-example-woodland-caribou-and-moose",
    "title": "5  Fictitious examples",
    "section": "5.2 Boreal Forest Example: Woodland Caribou and Moose",
    "text": "5.2 Boreal Forest Example: Woodland Caribou and Moose\nIn the boreal forest example, we examine the impacts of forestry activities and road disturbances on woodland caribou (Rangifer tarandus caribou) and moose (Alces alces), two iconic species of the northern forests. Both species are sensitive to changes in their environment, particularly during their reproductive periods, and face multiple anthropogenic threats.\n\nWoodland Caribou: This species is known for its wide-ranging migratory behavior and is highly dependent on mature, undisturbed forest habitats. The caribou’s rut occurs in the fall, a critical time for mating, while calving takes place in the spring. Both life processes are vulnerable to disturbances, particularly those related to habitat fragmentation and human encroachment.\nMoose: Moose are another important species of the boreal forest. They also depend on large, undisturbed forest areas for both feeding and reproductive activities. During the rut, male moose become highly territorial, and their interactions with other moose are essential for breeding success. Calving occurs in the spring, and the health of the mother and calf depends on access to undisturbed areas rich in food resources.\n\nStressors:\n\nHabitat Loss from Forestry Activities: Logging operations lead to deforestation, fragmentation of habitats, and increased access to predators, all of which negatively impact both the woodland caribou and moose. The destruction of mature forests and the disturbance to calving grounds during the spring can lead to reduced reproductive success for both species.\nDisturbance from Roads: Road construction and traffic can fragment the landscape, disturb migration routes, and increase the risk of predation. For caribou, roads can disrupt their migratory paths, particularly during the rut and calving periods. Moose are also affected, as roads increase the likelihood of vehicle collisions and can interfere with their access to feeding and calving areas.",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Fictitious examples</span>"
    ]
  },
  {
    "objectID": "case_study.html",
    "href": "case_study.html",
    "title": "6  Case study",
    "section": "",
    "text": "6.1 Case Study: Simplified Application of the Risk Assessment Framework\nTo demonstrate the practical application of the cumulative risk-based approach, we present a simplified case study using real-life data. This case study highlights the capacity of the framework to evaluate cumulative risks in a specific ecosystem and identify optimal intervention windows, focusing on either temporal or spatial dimensions. While this example does not explore the full spatio-temporal capabilities of the framework, it provides a clear and actionable demonstration of its use with openly available datasets.",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Case study</span>"
    ]
  },
  {
    "objectID": "case_study.html#potential-ecosystems-for-the-case-study",
    "href": "case_study.html#potential-ecosystems-for-the-case-study",
    "title": "6  Case study",
    "section": "6.2 Potential Ecosystems for the Case Study",
    "text": "6.2 Potential Ecosystems for the Case Study\nBelow are suggestions for ecosystems with openly available data that may be suitable for this assessment:\nHere’s a revised bullet-point list with data sources for each of the data requirements (human activities/stressors, species, life processes, and sensitivity) for the proposed method. Each ecosystem includes suggestions for openly available datasets specific to these categories.\n\n\n6.2.1 Potential Ecosystems and Data Sources\n\n6.2.1.1 Great Lakes Region\n\nHuman Activities/Stressors:\n\nPollution and invasive species: Great Lakes Environmental Database (GLENDA).\nAgricultural runoff: USGS National Water Information System (NWIS).\n\nSpecies:\n\nFish distributions: Great Lakes Fisheries Commission.\n\nLife Processes:\n\nSpawning and migration data: NOAA Fisheries Great Lakes Habitat Restoration.\n\nSensitivity:\n\nHabitat and species sensitivity: NatureServe Explorer.\n\n\n\n\n6.2.1.2 Chesapeake Bay\n\nHuman Activities/Stressors:\n\nAgricultural runoff and urban development: Chesapeake Bay Program Data Hub.\n\nSpecies:\n\nFisheries and aquatic species: NOAA Chesapeake Bay Office.\n\nLife Processes:\n\nSpawning data for striped bass and blue crabs: MD DNR Monitoring Program.\n\nSensitivity:\n\nWater quality and habitat models: EPA Chesapeake Bay TMDL.\n\n\n\n\n6.2.1.3 Arctic Marine Ecosystem\n\nHuman Activities/Stressors:\n\nShipping and oil exploration: MarineTraffic and Arctic Data Center.\n\nSpecies:\n\nMarine mammals and seabirds: Polar Data Catalogue.\n\nLife Processes:\n\nHabitat use during migration: NSIDC Arctic Animal Movement Archive.\n\nSensitivity:\n\nIce-edge sensitivity data: AMAP Arctic Monitoring and Assessment Program.\n\n\n\n\n6.2.1.4 Mississippi River Basin\n\nHuman Activities/Stressors:\n\nSedimentation and agricultural runoff: USGS National Water Information System (NWIS).\n\nSpecies:\n\nFreshwater species distributions: FishMap.org.\n\nLife Processes:\n\nSpawning and migration of freshwater species: Mississippi Basin Fish Habitat Partnership.\n\nSensitivity:\n\nSpecies vulnerability to runoff: EPA EnviroAtlas.\n\n\n\n\n6.2.1.5 Pacific Northwest Forests\n\nHuman Activities/Stressors:\n\nForestry impacts: US Forest Service Forest Inventory and Analysis (FIA).\nDams and hydropower: NOAA West Coast Region Habitat Restoration.\n\nSpecies:\n\nSalmon migration data: StreamNet.\n\nLife Processes:\n\nSalmon spawning and juvenile rearing: NOAA Fisheries Salmon Data.\n\nSensitivity:\n\nHabitat sensitivity to forestry: USGS Land Change Science Program.\n\n\n\n\n6.2.1.6 Amazon River Basin\n\nHuman Activities/Stressors:\n\nDeforestation and mining: Global Forest Watch.\n\nSpecies:\n\nFish biodiversity: FishBase.\n\nLife Processes:\n\nMigratory data for catfish species: Amazon Fish Project.\n\nSensitivity:\n\nHabitat vulnerability to sedimentation: WWF Living Amazon Initiative.\n\n\n\n\n6.2.1.7 Coral Reef Ecosystems\n\nHuman Activities/Stressors:\n\nBleaching events and fishing pressures: NOAA Coral Reef Watch.\n\nSpecies:\n\nReef fish and coral distributions: GBIF.\n\nLife Processes:\n\nSpawning aggregation sites: ReefBase.\n\nSensitivity:\n\nCoral sensitivity to bleaching: NOAA Coral Bleaching Database.\n\n\n\n\n\n6.2.2 Next Steps\nOnce the ecosystem is selected, these data sources can be explored to integrate relevant datasets for human activities, stressors, species, life processes, and sensitivities. This integration will support the simplified application of the cumulative risk-based framework, providing a practical demonstration of its utility. Let me know if you’d like more details on any ecosystem or data source!",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Case study</span>"
    ]
  },
  {
    "objectID": "lake_example.html",
    "href": "lake_example.html",
    "title": "7  Freshwater stream",
    "section": "",
    "text": "7.1 Freshwater Stream Example: Fish Species and Stressors\nIn this example, we focus on a freshwater lake ecosystem, home to three fish species: lake trout (Salvelinus namaycush), yellow perch (Perca flavescens), and cisco (Coregonus artedi). The selected life processes—spawning, natal, and rearing—are critical to their reproductive success and population stability. The main known human activies in the lake are dredging, which results in increased sedimentation, agriculture, which results in contaminant runoffs in the lake, and a ferry that connects the northern and southern shores of the lakes.\nLet us now construct this example and ultimately assess cumulative risks in an attempt to propose management options for human interventions.",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Freshwater stream</span>"
    ]
  },
  {
    "objectID": "lake_example.html#area-of-interest",
    "href": "lake_example.html#area-of-interest",
    "title": "7  Freshwater stream",
    "section": "7.2 Area of interest",
    "text": "7.2 Area of interest\nLet us begin by defining a fictitious area of interest\n\n\nCode\n# Create the polygon representing the area of interest (aoi)\n# Define coordinates for an elongated lake with irregularities\nlake_coords &lt;- matrix(c(\n  0, 0,\n  600, 25,\n  1000, 100,\n  900, 300,\n  800, 400,\n  600, 300,\n  400, 300,\n  300, 200,\n  100, 100,\n  0, 0\n), ncol = 2, byrow = TRUE)\n\n# Create the sf polygon\naoi &lt;- st_polygon(list(lake_coords)) |&gt;\n  st_sfc(crs = 32198) |&gt;\n  st_sf() |&gt;\n  smoothr::smooth(method = \"chaikin\") |&gt;\n  st_as_sf()\n\n# Step 2: Create a raster grid from the polygon\n# Create an empty raster with the extent of the AOI\ngrd &lt;- rast(ext(aoi), resolution = 5)\n\n# Rasterize the polygon into the grid\ngrd &lt;- rasterize(vect(aoi), grd, field = 1)\ngrd$cell_id &lt;- seq_len(ncell(grd))\nnames(grd) &lt;- c(\"aoi\", \"cell_id\")\n\n# Plot the outputs to verify\nplot(grd$aoi, main = \"Rasterized AOI\", col = \"#1dfede\")\nplot(aoi, add = TRUE, border = \"#7c9894\", lwd = 4)\n\n\n\n\n\n\n\n\n\nCode\n# Convert raster to a tabular format with cell IDs\ngrd_table &lt;- as.data.frame(grd, xy = TRUE) |&gt;\n  na.omit()",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Freshwater stream</span>"
    ]
  },
  {
    "objectID": "lake_example.html#species-and-life-processes",
    "href": "lake_example.html#species-and-life-processes",
    "title": "7  Freshwater stream",
    "section": "7.3 Species and Life Processes",
    "text": "7.3 Species and Life Processes\nWe will now simulate the distribution of life stages for the three fish species considered on a weekly basis for a typical year.\n\n7.3.1 Lake trout\nA top predator in the lake ecosystem, lake trout are sensitive to environmental changes. Lake trout spawn in the fall, usually from late September to early November, in cold, oxygen-rich shallow waters. After spawning, the eggs remain in the substrate over the winter and hatch in the early spring, often in April or May, depending on water temperature and latitude. The rearing process occurs in deeper waters, where juveniles grow before moving to adult habitats. Spawning habitat disruption due to sedimentation can severely impact the species’ reproductive success.\n\n\nCode\n# Define life stage periods (spawning, natal, rearing)\nlife_stages &lt;- data.frame(\n  life_stage = c(\"spawning\", \"natal\", \"rearing\"),\n  start_date = as.Date(c(\"2024-10-01\", \"2024-04-01\", \"2024-06-01\")),\n  end_date = as.Date(c(\"2024-11-30\", \"2024-05-31\", \"2024-08-31\"))\n)\n\n# Create spatial zones for life processes\n# Spawning\nlt_spawning &lt;- simulate_life_process(\n  centers = matrix(c(800, 200), ncol = 2),\n  raster_grid = grd,\n  period = life_stages[life_stages$life_stage == \"spawning\", 2:3]\n)\nlt_spawning$ras_df$life_stage &lt;- \"spawning\"\n\n# Natal\nlt_natal &lt;- simulate_life_process(\n  centers = matrix(c(850, 900, 325, 100), ncol = 2),\n  raster_grid = grd,\n  period = life_stages[life_stages$life_stage == \"natal\", 2:3],\n  bandwidth = 40\n)\nlt_natal$ras_df$life_stage &lt;- \"natal\"\n\n# Natal\nlt_rearing &lt;- simulate_life_process(\n  centers = matrix(c(750, 700, 650, 600, 175, 170, 165, 160), ncol = 2),\n  raster_grid = grd,\n  period = life_stages[life_stages$life_stage == \"rearing\", 2:3],\n  bandwidth = 40\n)\nlt_rearing$ras_df$life_stage &lt;- \"rearing\"\n\n# Bind together\nlake_trout &lt;- dplyr::bind_rows(lt_spawning$ras_df, lt_natal$ras_df, lt_rearing$ras_df) |&gt;\n  dplyr::mutate(species = \"lake_trout\")\n\n# Visualize results\nlake_trout |&gt;\n  dplyr::mutate(month = format(as.Date(date), \"%Y-%m\")) |&gt;\n  dplyr::group_by(month, life_stage) |&gt;\n  make_facets(\"Lake trout life processes\")\n\n\n\n\n\n\n\n\n\n\n7.3.1.1 Yellow Perch\nThis species is a key prey item for larger fish and is also commercially valuable. Yellow perch spawn in early spring, often in shallow areas of the stream. Their eggs and larvae are vulnerable to sedimentation, which can smother eggs and reduce larval survival. The rearing process, occurring in the stream’s vegetated areas, can also be affected by sedimentation and contaminants, particularly from agricultural runoff.\n\n\nCode\n# Define life stage periods (spawning, natal, rearing)\nlife_stages &lt;- data.frame(\n  life_stage = c(\"spawning\", \"natal\", \"rearing\"),\n  start_date = as.Date(c(\"2024-03-01\", \"2024-04-01\", \"2024-05-01\")),\n  end_date = as.Date(c(\"2024-04-15\", \"2024-05-15\", \"2024-08-31\"))\n)\n\n# Create spatial zones for life processes\n# Spawning (shallow stream areas)\nyp_spawning &lt;- simulate_life_process(\n  centers = matrix(c(300, 75, 200, 75), ncol = 2),\n  raster_grid = grd,\n  period = life_stages[life_stages$life_stage == \"spawning\", 2:3],\n  bandwidth = 50\n)\nyp_spawning$ras_df$life_stage &lt;- \"spawning\"\n\n# Natal (shallow vegetated areas)\nyp_natal &lt;- simulate_life_process(\n  centers = matrix(c(300, 75, 200, 75), ncol = 2),\n  raster_grid = grd,\n  period = life_stages[life_stages$life_stage == \"natal\", 2:3],\n  bandwidth = 30\n)\nyp_natal$ras_df$life_stage &lt;- \"natal\"\n\n# Rearing (vegetated stream areas)\nyp_rearing &lt;- simulate_life_process(\n  centers = matrix(c(500, 400, 300, 200, 75, 150, 250, 300, 250, 200, 175, 75, 75, 75), ncol = 2),\n  raster_grid = grd,\n  period = life_stages[life_stages$life_stage == \"rearing\", 2:3],\n  bandwidth = 50\n)\nyp_rearing$ras_df$life_stage &lt;- \"rearing\"\n\n# Bind together\nyellow_perch &lt;- dplyr::bind_rows(yp_spawning$ras_df, yp_natal$ras_df, yp_rearing$ras_df) |&gt;\n  dplyr::mutate(species = \"yellow_perch\")\n\n# Visualize results\nyellow_perch |&gt;\n  dplyr::mutate(month = format(as.Date(date), \"%Y-%m\")) |&gt;\n  dplyr::group_by(month, life_stage) |&gt;\n  make_facets(\"Yellow Perch life processes\")\n\n\n\n\n\n\n\n\n\n\n\n7.3.1.2 Cisco\nCiscoes are pelagic fish that play a significant role in the food web. They spawn in deep waters during the fall, and their juvenile rearing areas are in the upper layers of the water column. Cisco are particularly vulnerable to contaminants, as these substances can accumulate in their tissues, affecting both their health and the success of their offspring.\n\n\nCode\n# Define life stage periods (spawning, natal, rearing)\nlife_stages &lt;- data.frame(\n  life_stage = c(\"spawning\", \"natal\", \"rearing\"),\n  start_date = as.Date(c(\"2024-10-01\", \"2024-11-01\", \"2024-06-01\")),\n  end_date = as.Date(c(\"2024-12-31\", \"2025-01-15\", \"2024-09-30\"))\n)\n\n# Create spatial zones for life processes\n# Spawning (deep waters)\ncisco_spawning &lt;- simulate_life_process(\n  centers = matrix(c(750, 700, 650, 600, 180, 175, 170, 165), ncol = 2),\n  raster_grid = grd,\n  period = life_stages[life_stages$life_stage == \"spawning\", 2:3],\n  bandwidth = 30\n)\ncisco_spawning$ras_df$life_stage &lt;- \"spawning\"\n\n# Natal (pelagic upper layers, widespread)\ncisco_natal &lt;- simulate_life_process(\n  centers = matrix(c(700, 650, 600, 175, 170, 165), ncol = 2),\n  raster_grid = grd,\n  period = life_stages[life_stages$life_stage == \"natal\", 2:3],\n  bandwidth = 40\n)\ncisco_natal$ras_df$life_stage &lt;- \"natal\"\n\n# Rearing (upper water column areas)\ncisco_rearing &lt;- simulate_life_process(\n  centers = matrix(c(750, 700, 650, 600, 550, 525, 180, 175, 170, 165, 160, 150), ncol = 2),\n  raster_grid = grd,\n  period = life_stages[life_stages$life_stage == \"rearing\", 2:3],\n  bandwidth = 50\n)\ncisco_rearing$ras_df$life_stage &lt;- \"rearing\"\n\n# Bind together\ncisco &lt;- dplyr::bind_rows(cisco_spawning$ras_df, cisco_natal$ras_df, cisco_rearing$ras_df) |&gt;\n  dplyr::mutate(species = \"cisco\")\n\n# Visualize results\ncisco |&gt;\n  dplyr::mutate(month = format(as.Date(date), \"%Y-%m\")) |&gt;\n  dplyr::group_by(month, life_stage) |&gt;\n  make_facets(\"Cisco life processes\")",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Freshwater stream</span>"
    ]
  },
  {
    "objectID": "lake_example.html#stressors",
    "href": "lake_example.html#stressors",
    "title": "7  Freshwater stream",
    "section": "7.4 Stressors",
    "text": "7.4 Stressors\n\n7.4.1 Sedimentation from Dredging\nDredging activities in the stream disturb the riverbed, releasing fine sediments that can smother fish eggs, disrupt spawning grounds, and negatively impact water quality. Sedimentation reduces water clarity and light penetration, harming the rearing habitats for yellow perch and lake trout by limiting oxygen levels and impairing vegetation growth. Additionally, dredging physically alters habitats by removing critical substrates, such as rocks and vegetation, essential for spawning and rearing. It can also mobilize contaminants like heavy metals and hydrocarbons trapped in sediments, introducing toxic substances into the water and posing risks to aquatic species and ecosystem health. While dredging presents numerous potential stressors, we consider sedimentation, habitat destruction, and contaminant release as primary concerns in our fictitious lake.\nDredging activities in the lake occur at two known locations: the northern end of the ferry route and a public dock situated at the southwest end of the lake. These recurring dredging activities are associated with sedimentation, habitat destruction, and contaminant release, which pose risks to aquatic species. Sedimentation from dredging reduces water clarity and smothers fish eggs in nearby spawning and rearing habitats. Habitat destruction impacts critical substrates, while mobilized contaminants from disturbed sediments can introduce toxic substances into the water.\nDredging activities are typically carried out during warmer months, from late spring to early fall (May to September), when conditions are more favorable for construction work and equipment operation. These activities pause during the mild winter months when reduced water temperatures and ice formation on the shoreline make dredging less practical.\n\n\nCode\n# Define stressors from dredging\ndredging_stressors &lt;- data.frame(\n  stressor = c(\"sedimentation\", \"habitat_destruction\", \"contaminants\"),\n  start_date = as.Date(c(\"2024-05-01\", \"2024-05-01\", \"2024-05-01\")), # Start of dredging period\n  end_date = as.Date(c(\"2024-06-30\", \"2024-06-30\", \"2024-06-30\")), # End of dredging period\n  intensity = c(1.0, 0.7, 0.5), # Relative intensity of each stressor\n  bandwidth = c(50, 20, 30) # Bandwidth for spatial distribution\n)\n\n# Define dredging activity locations\ndredging_locations &lt;- matrix(c(\n  650, 350, # Northern end of the ferry route\n  75, 75 # Public dock near the southern shoreline\n), ncol = 2, byrow = TRUE)\n\n# Simulate distribution and intensity for each stressor\ndredging_results &lt;- lapply(1:nrow(dredging_stressors), function(i) {\n  simulate_life_process(\n    centers = dredging_locations,\n    raster_grid = grd,\n    period = dredging_stressors[i, c(\"start_date\", \"end_date\")], # Stressor-specific period\n    time_steps = seq.Date(dredging_stressors$start_date[i], dredging_stressors$end_date[i], by = \"month\"),\n    n_samples = 100, # Number of disturbance points\n    bandwidth = dredging_stressors$bandwidth[i], # Stressor-specific bandwidth\n    prob_threshold = 0.05 # Probability threshold\n  )\n})\n\n# Combine all results into a single data frame\ndredging &lt;- lapply(seq_along(dredging_results), function(i) {\n  dredging_results[[i]]$ras_df |&gt;\n    dplyr::mutate(life_stage = dredging_stressors$stressor[i]) # Add stressor label\n}) |&gt;\n  dplyr::bind_rows() |&gt;\n  dplyr::mutate(activity = \"dredging\")\n\n\n# Visualize results for each stressor\ndredging |&gt;\n  dplyr::mutate(month = format(as.Date(date), \"%Y-%m\")) |&gt;\n  dplyr::group_by(month, life_stage) |&gt;\n  make_facets(\"Dredging Stressors Distribution\")\n\n\n\n\n\n\n\n\n\n\n\n7.4.2 Contaminants from Agricultural Runoff\nAgricultural runoff, including pesticides and fertilizers, introduces toxic substances into the water, affecting species health and reproductive success. These contaminants, particularly nitrates and phosphates, can lead to eutrophication, reducing oxygen levels and impairing the development of fish larvae, especially for species like the yellow perch and cisco.\nAgricultural runoff is most pronounced during the growing and harvest seasons, typically from late spring to early fall (May to October). Fertilizer and pesticide applications in spring, combined with summer irrigation and heavy rainfall events, increase the likelihood of nutrient and contaminant runoff into the lake. Runoff diminishes in the winter due to reduced agricultural activity, although occasional thaw events could still contribute to nutrient loading.\n\n\nCode\n# Define life stage periods for runoff intensity\nrunoff_intensity &lt;- data.frame(\n  season = c(\"spring\", \"summer\", \"fall\"),\n  start_date = as.Date(c(\"2024-04-01\", \"2024-06-01\", \"2024-09-01\")),\n  end_date = as.Date(c(\"2024-05-31\", \"2024-08-31\", \"2024-10-31\")),\n  intensity = c(1.0, 0.5, 0.8), # Relative intensity for each period\n  bandwidth = c(70, 30, 60), # Bandwidth for spatial spread\n  n_samples = c(300, 100, 225) # Sample size for each season\n)\n\n# Create spatial zones for runoff (same locations for all seasons)\nrunoff_centers &lt;- matrix(c(\n  200, 0, # Location 1\n  900, 50, # Location 2\n  400, 300 # Location 3\n), ncol = 2, byrow = TRUE)\n\n# Simulate runoff for each season with custom parameters\nrunoff_results &lt;- lapply(1:nrow(runoff_intensity), function(i) {\n  simulate_life_process(\n    centers = runoff_centers,\n    raster_grid = grd,\n    period = runoff_intensity[i, c(\"start_date\", \"end_date\")], # Season's time range\n    time_steps = seq.Date(runoff_intensity$start_date[i], runoff_intensity$end_date[i], by = \"month\"),\n    n_samples = runoff_intensity$n_samples[i], # Custom sample size\n    bandwidth = runoff_intensity$bandwidth[i], # Custom bandwidth\n    prob_threshold = 0.05 # Threshold for affected areas\n  )\n})\n\n# Combine all results into one data frame\nagricultural_runoff &lt;- lapply(seq_along(runoff_results), function(i) {\n  runoff_results[[i]]$ras_df |&gt;\n    dplyr::mutate(life_stage = \"contaminants\") # Add season label\n}) |&gt;\n  dplyr::bind_rows() |&gt;\n  dplyr::mutate(activity = \"agriculture\")\n\n# Visualize results\nagricultural_runoff |&gt;\n  dplyr::mutate(month = format(as.Date(date), \"%Y-%m\")) |&gt;\n  dplyr::group_by(month, life_stage) |&gt;\n  make_facets(\"Agricultural Runoff Stressor\")\n\n\n\n\n\n\n\n\n\n\n\n7.4.3 Ferry Operations\nA ferry connecting the northern and southern shores of the lake creates continuous surface disturbances and underwater noise that can disrupt fish behavior, particularly during spawning and rearing periods. The ferry’s propeller wash and regular crossings can also resuspend sediments, exacerbating turbidity and potentially impacting sensitive nearshore habitats.\nThe ferry operates year-round, as the mild winter conditions in the region do not inhibit its function. The ferry’s crossings are frequent and consistent throughout the year, creating continuous surface disturbances, noise, and sediment resuspension that may impact fish behavior and habitat quality at any time, with potentially heightened effects during sensitive life processes such as spawning and rearing.\n\n\nCode\n# Define the ferry route as a line connecting the northern and southern shores\nferry_route &lt;- matrix(c(\n  650, 350, # Northern shore (start point)\n  550, 0 # Southern shore (end point)\n), ncol = 2, byrow = TRUE)\n\n# Convert the ferry route to an `sf` object\nferry_route_sf &lt;- st_linestring(ferry_route) |&gt;\n  st_sfc(crs = st_crs(grd)) |&gt;\n  st_sf()\n\n# Sample points along the ferry route\ncenters &lt;- st_sample(ferry_route_sf, size = 20) |&gt;\n  st_coordinates()\ncolnames(centers) &lt;- c(\"V1\", \"V2\", \"L\")\n\n# Simulate ferry operations as a constant year-round stressor\nferry_operations &lt;- simulate_life_process(\n  centers = centers,\n  raster_grid = grd,\n  period = as.Date(c(\"2024-01-01\", \"2024-12-31\")), # Year-round\n  time_steps = seq.Date(as.Date(\"2024-01-01\"), as.Date(\"2024-12-31\"), by = \"month\"), # Monthly steps\n  n_samples = 100, # Number of ferry-related disturbances per time step\n  bandwidth = 30, # Bandwidth for disturbance spread\n  prob_threshold = 0.05 # Threshold for identifying affected areas\n)\n\nferry &lt;- ferry_operations$ras_df |&gt;\n  dplyr::mutate(\n    life_stage = \"disturbance\",\n    activity = \"ferry operations\"\n  )\n\n# Visualize results\nferry |&gt;\n  dplyr::mutate(month = format(as.Date(date), \"%Y-%m\")) |&gt;\n  dplyr::group_by(month, life_stage) |&gt;\n  make_facets(\"Ferry operations intensity\")",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Freshwater stream</span>"
    ]
  },
  {
    "objectID": "lake_example.html#sensitivity",
    "href": "lake_example.html#sensitivity",
    "title": "7  Freshwater stream",
    "section": "7.5 Sensitivity",
    "text": "7.5 Sensitivity\nThe sensitivity values were assigned to reflect the relative vulnerability of different species and life stages to the four stressors identified in the system: sedimentation, habitat destruction, contaminants, and ferry operations. These values are scaled to ensure comparability across stressors, with a value of 1.0 representing the maximum expected sensitivity to a given stressor.\n\nSedimentation:\n\nSedimentation poses the greatest risk to spawning life stages, particularly for lake trout (1.0) and yellow perch (0.9), as fine sediments can smother eggs and degrade spawning habitats.\nThe sensitivity of cisco to sedimentation is lower during spawning (0.8), reflecting their preference for deeper waters, where sedimentation effects are somewhat mitigated.\nNatal and rearing stages exhibit reduced sensitivity across all species due to their lower reliance on sediment-free habitats.\n\nHabitat Destruction:\n\nHabitat destruction significantly affects lake trout spawning (1.0) and natal (0.8) stages, as they depend heavily on stable substrates and intact habitats.\nYellow perch are similarly affected during spawning (0.9) and natal (0.7) stages.\nCisco exhibit moderate sensitivity (0.8 for spawning), reflecting their broader habitat tolerance.\n\nContaminants:\n\nContaminants, including those released by dredging and agricultural runoff, disproportionately affect the natal (0.9) and rearing (0.8) stages of lake trout and yellow perch, as juveniles are more susceptible to toxic substances during development.\nCisco are highly sensitive to contaminants during spawning (1.0) and natal stages (0.9), due to bioaccumulation in pelagic environments.\n\nFerry Operations:\n\nFerry operations, primarily through underwater noise and disturbances, pose lower risks compared to other stressors.\nYellow perch exhibit moderate sensitivity during rearing (0.5), reflecting their proximity to shoreline areas where ferry activity is concentrated.\nLake trout and cisco show reduced sensitivity overall, with spawning (0.6 and 0.5, respectively) being the most affected life stage due to potential behavioral disruptions caused by noise.\n\n\nThe sensitivity values emphasize the interplay between species-specific ecological traits, life stage vulnerabilities, and stressor-specific impacts. Spawning stages across all species are consistently more sensitive to sedimentation and habitat destruction, while natal and rearing stages show heightened vulnerabilities to contaminants. Ferry operations, although less impactful, still contribute to cumulative risks, particularly for species reliant on shoreline or shallow-water habitats.\nThis sensitivity framework provides a basis for quantifying and mapping risks, guiding the identification of optimal timing and spatial windows for interventions.\n\n\nCode\n# Create updated sensitivity data frame\nsensitivity &lt;- data.frame(\n  stressor = rep(\n    c(\n      rep(\"sedimentation\", 3),\n      rep(\"habitat_destruction\", 3),\n      rep(\"contaminants\", 3),\n      rep(\"disturbance\", 3)\n    ),\n    3\n  ),\n  species = c(\n    rep(\"lake_trout\", 12),\n    rep(\"yellow_perch\", 12),\n    rep(\"cisco\", 12)\n  ),\n  life_stage = rep(c(\"spawning\", \"natal\", \"rearing\"), 12),\n  sensitivity = c(\n    # Lake Trout Sensitivity\n    1.0, 0.7, 0.5, # Sedimentation\n    1.0, 0.8, 0.6, # Habitat Destruction\n    0.9, 0.9, 0.8, # Contaminants\n    0.6, 0.5, 0.4, # Ferry Operations\n    # Yellow Perch Sensitivity\n    0.9, 0.7, 0.6, # Sedimentation\n    0.9, 0.7, 0.7, # Habitat Destruction\n    0.8, 0.9, 0.8, # Contaminants\n    0.7, 0.6, 0.5, # Ferry Operations\n    # Cisco Sensitivity\n    0.8, 0.6, 0.5, # Sedimentation\n    0.8, 0.7, 0.6, # Habitat Destruction\n    1.0, 0.9, 0.7, # Contaminants\n    0.5, 0.4, 0.3 # Ferry Operations\n  )\n)\n\n# Create a heatmap of sensitivities\nsensitivity |&gt;\n  dplyr::mutate(name = glue::glue(\"{species}_{life_stage}\")) |&gt;\n  ggplot(aes(x = name, y = stressor, fill = sensitivity)) +\n  geom_tile(color = \"white\") +\n  scale_fill_viridis_c(option = \"D\", name = \"Sensitivity\") +\n  labs(\n    title = \"Sensitivity Heatmap\",\n    x = \"Life Stage\",\n    y = \"Stressor\"\n  ) +\n  theme_minimal() +\n  theme(\n    axis.text.x = element_text(angle = 45, hjust = 1),\n    axis.text.y = element_text(size = 10),\n    panel.grid = element_blank()\n  )",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Freshwater stream</span>"
    ]
  },
  {
    "objectID": "lake_example.html#risk-assessment",
    "href": "lake_example.html#risk-assessment",
    "title": "7  Freshwater stream",
    "section": "7.6 Risk assessment",
    "text": "7.6 Risk assessment\nNow we have all the data necessary to perform a spatially and temporally explicit rcumulative risk assessment:\n\n\nCode\n# Species\nspecies &lt;- dplyr::bind_rows(lake_trout, yellow_perch, cisco) |&gt;\n  dplyr::rename(species_presence = presence)\nknitr::kable(head(species))\n\n\n\n\n\nx\ny\ndate\nspecies_presence\nlife_stage\nspecies\n\n\n\n\n762.5\n372.5\n2024-10-01\n0\nspawning\nlake_trout\n\n\n762.5\n372.5\n2024-11-01\n0\nspawning\nlake_trout\n\n\n767.5\n372.5\n2024-10-01\n0\nspawning\nlake_trout\n\n\n767.5\n372.5\n2024-11-01\n0\nspawning\nlake_trout\n\n\n772.5\n372.5\n2024-10-01\n0\nspawning\nlake_trout\n\n\n772.5\n372.5\n2024-11-01\n0\nspawning\nlake_trout\n\n\n\n\n\nCode\n# Stressors\nstressors &lt;- dplyr::bind_rows(dredging, agricultural_runoff, ferry) |&gt;\n  dplyr::rename(stressor_presence = presence, stressor = life_stage)\nknitr::kable(head(stressors))\n\n\n\n\n\nx\ny\ndate\nstressor_presence\nstressor\nactivity\n\n\n\n\n762.5\n372.5\n2024-05-01\n0.2821701\nsedimentation\ndredging\n\n\n762.5\n372.5\n2024-06-01\n0.0846510\nsedimentation\ndredging\n\n\n767.5\n372.5\n2024-05-01\n0.2257361\nsedimentation\ndredging\n\n\n767.5\n372.5\n2024-06-01\n0.0846510\nsedimentation\ndredging\n\n\n772.5\n372.5\n2024-05-01\n0.2257361\nsedimentation\ndredging\n\n\n772.5\n372.5\n2024-06-01\n0.0846510\nsedimentation\ndredging\n\n\n\n\n\nCode\n# Sensitivity\nsensitivity &lt;- sensitivity |&gt;\n  dplyr::select(stressor, species, life_stage, sensitivity)\nknitr::kable(head(sensitivity))\n\n\n\n\n\nstressor\nspecies\nlife_stage\nsensitivity\n\n\n\n\nsedimentation\nlake_trout\nspawning\n1.0\n\n\nsedimentation\nlake_trout\nnatal\n0.7\n\n\nsedimentation\nlake_trout\nrearing\n0.5\n\n\nhabitat_destruction\nlake_trout\nspawning\n1.0\n\n\nhabitat_destruction\nlake_trout\nnatal\n0.8\n\n\nhabitat_destruction\nlake_trout\nrearing\n0.6\n\n\n\n\n\nNow let us assess the risks present in our fictitious lake based on the information that we have. As previously presented, we propose to use an additive cumulative risk model that considers both time and space to assess the risks of each stressor to each life stage in our system. We will begin by assessing the risk at each time step and in each cell of the study grid. This assessment would essentially represent the baseline risk levels in our fictitious lake base on the intensity of stressors, the distribution of life stages, and the sensitivity of life stages to stressors.\n\n\nCode\nrisk &lt;- dplyr::full_join(species, stressors, by = c(\"x\", \"y\", \"date\"), relationship = \"many-to-many\") |&gt;\n  na.omit() |&gt;\n  dplyr::left_join(sensitivity, by = c(\"stressor\", \"species\", \"life_stage\")) |&gt;\n  dplyr::mutate(risk = species_presence * stressor_presence * sensitivity) |&gt;\n  dplyr::filter(risk &gt; 0) |&gt;\n  dplyr::select(x, y, date, life_stage, species, stressor, activity, risk)\nknitr::kable(head(risk))\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nx\ny\ndate\nlife_stage\nspecies\nstressor\nactivity\nrisk\n\n\n\n\n737.5\n362.5\n2024-10-01\nspawning\nlake_trout\ndisturbance\nferry operations\n0.0000294\n\n\n742.5\n362.5\n2024-10-01\nspawning\nlake_trout\ndisturbance\nferry operations\n0.0000294\n\n\n727.5\n357.5\n2024-10-01\nspawning\nlake_trout\ndisturbance\nferry operations\n0.0000281\n\n\n732.5\n357.5\n2024-10-01\nspawning\nlake_trout\ndisturbance\nferry operations\n0.0000281\n\n\n737.5\n357.5\n2024-10-01\nspawning\nlake_trout\ndisturbance\nferry operations\n0.0000281\n\n\n712.5\n352.5\n2024-10-01\nspawning\nlake_trout\ndisturbance\nferry operations\n0.0000546\n\n\n\n\n\nCode\n# Visualize monthly cumulative risk\ntmp &lt;- risk |&gt;\n  dplyr::mutate(month = format(as.Date(date), \"%Y-%m\")) |&gt;\n  dplyr::group_by(x, y, month) |&gt;\n  dplyr::summarise(cum_risk = sum(risk)) |&gt;\n  dplyr::ungroup()\n\n# Function to create faceted raster figures with AOI polygon\nggplot(tmp, aes(x = x, y = y, fill = cum_risk)) +\n  geom_tile() +\n  facet_wrap(~month, ncol = 3) +\n  scale_fill_gradientn(\n    colors = viridis::viridis(100),\n    na.value = \"grey\",\n    name = \"Cumulative Risk\"\n  ) +\n  labs(\n    x = \"Longitude\",\n    y = \"Latitude\",\n    title = \"Monthly Cumulative Risk\"\n  ) +\n  coord_fixed() +\n  theme_minimal() +\n  theme(\n    axis.text.x = element_text(angle = 45, hjust = 1),\n    strip.text = element_text(size = 8),\n    panel.grid = element_blank()\n  )",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Freshwater stream</span>"
    ]
  },
  {
    "objectID": "lake_example.html#timing-and-spacing-windows-assessments",
    "href": "lake_example.html#timing-and-spacing-windows-assessments",
    "title": "7  Freshwater stream",
    "section": "7.7 Timing and Spacing Windows assessments",
    "text": "7.7 Timing and Spacing Windows assessments\nNow let us finally explore the reasoning behing this work: identify time and/or space windows to optimize interventions in our fictitious lakes based on the knowledge that we have in the lake. We will divide this section to explore the possibilities offered by the model as a function of data availability and integrated vs non-integrated ecosystem management. The integrated vs non-integrated management will simply consider or not consider pre-existing risks in the system, respectively. Then we can either wish to minizimize potential impacts from planned projects through the project appraisal phase, which can be done in an integrated or non-integrated framework, or we can attempt to maximize outcomes of management actions, which we will always look at through the lense of integrated management.\n\n7.7.1 Project appraisal\nWe begin with project appraisal, i.e. attempting to minimize the affects of a proposed project. For our example, let us imagine that there is a project under review that wishes to incorporate an additional dock for pleasure vessels on the lake. Since dredging activies are performed typically from late spring to early fall (May to September), we will perform the assessment for that period.\n\n7.7.1.1 Temporal data\nWe begin with an assessment based solely on temporal data. In this case, the only assessment possible is the identification of an optimal timing window for intervention. Let us simplify our risk assessment and remove all spatial information.\n\n\nCode\n# Species\nsp &lt;- species |&gt;\n  dplyr::group_by(date, species, life_stage) |&gt;\n  dplyr::summarise(species_presence = sum(species_presence)) |&gt;\n  dplyr::ungroup() |&gt;\n  dplyr::mutate(species_presence = dplyr::if_else(species_presence &gt; 0, 1, 0))\nknitr::kable(head(sp))\n\n\n\n\n\ndate\nspecies\nlife_stage\nspecies_presence\n\n\n\n\n2024-03-01\nyellow_perch\nspawning\n1\n\n\n2024-04-01\nlake_trout\nnatal\n1\n\n\n2024-04-01\nyellow_perch\nnatal\n1\n\n\n2024-04-01\nyellow_perch\nspawning\n1\n\n\n2024-05-01\nlake_trout\nnatal\n1\n\n\n2024-05-01\nyellow_perch\nnatal\n1\n\n\n\n\n\nCode\n# Stressors\nst &lt;- stressors |&gt;\n  dplyr::group_by(date, activity, stressor) |&gt;\n  dplyr::summarise(stressor_presence = sum(stressor_presence)) |&gt;\n  dplyr::ungroup() |&gt;\n  dplyr::mutate(stressor_presence = dplyr::if_else(stressor_presence &gt; 0, 1, 0))\nknitr::kable(head(st))\n\n\n\n\n\ndate\nactivity\nstressor\nstressor_presence\n\n\n\n\n2024-01-01\nferry operations\ndisturbance\n1\n\n\n2024-02-01\nferry operations\ndisturbance\n1\n\n\n2024-03-01\nferry operations\ndisturbance\n1\n\n\n2024-04-01\nagriculture\ncontaminants\n1\n\n\n2024-04-01\nferry operations\ndisturbance\n1\n\n\n2024-05-01\nagriculture\ncontaminants\n1\n\n\n\n\n\nCode\n# Planned stressors\ntime_planned &lt;- seq(as.Date(\"2024-05-01\"), as.Date(\"2024-09-30\"), by = \"month\")\nstress_planned &lt;- c(\"sedimentation\", \"habitat_destruction\", \"contaminants\")\nplanned_st &lt;- data.frame(\n  date = as.character(rep(time_planned, length(stress_planned))),\n  stressor = rep(stress_planned, length(time_planned)),\n  activity = \"dredging_planned\",\n  stressor_presence = 1\n)\nknitr::kable(head(planned_st))\n\n\n\n\n\ndate\nstressor\nactivity\nstressor_presence\n\n\n\n\n2024-05-01\nsedimentation\ndredging_planned\n1\n\n\n2024-06-01\nhabitat_destruction\ndredging_planned\n1\n\n\n2024-07-01\ncontaminants\ndredging_planned\n1\n\n\n2024-08-01\nsedimentation\ndredging_planned\n1\n\n\n2024-09-01\nhabitat_destruction\ndredging_planned\n1\n\n\n2024-05-01\ncontaminants\ndredging_planned\n1\n\n\n\n\n\nCode\n# Combined stressors\nst &lt;- dplyr::bind_rows(st, planned_st)\n\n# Risk\nrsk_all &lt;- dplyr::full_join(sp, st, by = c(\"date\"), relationship = \"many-to-many\") |&gt;\n  na.omit() |&gt;\n  dplyr::left_join(sensitivity, by = c(\"stressor\", \"species\", \"life_stage\")) |&gt;\n  dplyr::mutate(risk = species_presence * stressor_presence * sensitivity) |&gt;\n  dplyr::filter(risk &gt; 0) |&gt;\n  dplyr::select(date, life_stage, species, stressor, activity, risk) |&gt;\n  dplyr::arrange(activity, stressor, date)\nknitr::kable(head(rsk_all))\n\n\n\n\n\ndate\nlife_stage\nspecies\nstressor\nactivity\nrisk\n\n\n\n\n2024-04-01\nnatal\nlake_trout\ncontaminants\nagriculture\n0.9\n\n\n2024-04-01\nnatal\nyellow_perch\ncontaminants\nagriculture\n0.9\n\n\n2024-04-01\nspawning\nyellow_perch\ncontaminants\nagriculture\n0.8\n\n\n2024-05-01\nnatal\nlake_trout\ncontaminants\nagriculture\n0.9\n\n\n2024-05-01\nnatal\nyellow_perch\ncontaminants\nagriculture\n0.9\n\n\n2024-05-01\nrearing\nyellow_perch\ncontaminants\nagriculture\n0.8\n\n\n\n\n\nCode\n# Cumulative risk - integrated\nrskcum_int &lt;- rsk_all |&gt;\n  dplyr::group_by(date) |&gt;\n  dplyr::summarise(cum_risk = sum(risk)) |&gt;\n  dplyr::ungroup()\nrskcum_int &lt;- data.frame(\n  date = seq(as.Date(\"2024-01-01\"), as.Date(\"2024-12-31\"), by = \"month\") |&gt;\n    as.character()\n) |&gt;\n  dplyr::left_join(rskcum_int, by = \"date\") |&gt;\n  dplyr::mutate(\n    cum_risk = if_else(is.na(cum_risk), 0, cum_risk),\n    integrated = TRUE\n  )\nknitr::kable(rskcum_int)\n\n\n\n\n\ndate\ncum_risk\nintegrated\n\n\n\n\n2024-01-01\n0.0\nTRUE\n\n\n2024-02-01\n0.0\nTRUE\n\n\n2024-03-01\n0.7\nTRUE\n\n\n2024-04-01\n4.4\nTRUE\n\n\n2024-05-01\n17.8\nTRUE\n\n\n2024-06-01\n15.1\nTRUE\n\n\n2024-07-01\n9.3\nTRUE\n\n\n2024-08-01\n9.3\nTRUE\n\n\n2024-09-01\n2.8\nTRUE\n\n\n2024-10-01\n3.0\nTRUE\n\n\n2024-11-01\n1.5\nTRUE\n\n\n2024-12-01\n0.9\nTRUE\n\n\n\n\n\nCode\n# Cumulative risk - non-integrated\nrskcum_non_int &lt;- rsk_all |&gt;\n  dplyr::filter(activity == \"dredging_planned\") |&gt;\n  dplyr::group_by(date) |&gt;\n  dplyr::summarise(cum_risk = sum(risk)) |&gt;\n  dplyr::ungroup()\nrskcum_non_int &lt;- data.frame(\n  date = seq(as.Date(\"2024-01-01\"), as.Date(\"2024-12-31\"), by = \"month\") |&gt;\n    as.character()\n) |&gt;\n  dplyr::left_join(rskcum_non_int, by = \"date\") |&gt;\n  dplyr::mutate(\n    cum_risk = if_else(is.na(cum_risk), 0, cum_risk),\n    integrated = FALSE\n  )\nknitr::kable(rskcum_int)\n\n\n\n\n\ndate\ncum_risk\nintegrated\n\n\n\n\n2024-01-01\n0.0\nTRUE\n\n\n2024-02-01\n0.0\nTRUE\n\n\n2024-03-01\n0.7\nTRUE\n\n\n2024-04-01\n4.4\nTRUE\n\n\n2024-05-01\n17.8\nTRUE\n\n\n2024-06-01\n15.1\nTRUE\n\n\n2024-07-01\n9.3\nTRUE\n\n\n2024-08-01\n9.3\nTRUE\n\n\n2024-09-01\n2.8\nTRUE\n\n\n2024-10-01\n3.0\nTRUE\n\n\n2024-11-01\n1.5\nTRUE\n\n\n2024-12-01\n0.9\nTRUE\n\n\n\n\n\nCode\n# Bind together\nrskcum &lt;- dplyr::bind_rows(rskcum_int, rskcum_non_int) |&gt;\n  dplyr::mutate(date = lubridate::as_date(date))\n\n# Timing windows\n## Integrated\nwindow &lt;- 1\ntw &lt;- rbind(\n  calculate_optimal_timing(rskcum_int,\n    window_size = window,\n    period_start = \"2024-06-01\",\n    period_end = \"2024-08-31\",\n    wrap = TRUE\n  ),\n  calculate_optimal_timing(rskcum_non_int,\n    window_size = window,\n    period_start = \"2024-06-01\",\n    period_end = \"2024-08-31\",\n    wrap = TRUE\n  )\n)\n\n# Visualize\nplot_cumulative_risk(risk_data = rskcum, timing_data = tw)\n\n\n\n\n\n\n\n\n\n\n\n7.7.1.2 Spatial data\nTODO: space optimization\n\n\n7.7.1.3 Spatiotemporal data\nTODO: space optimization TODO: space-time optimization\nNow we will explore how to use the spatio-temporal data to identify timing windows that minimize the risks posed by the proposed project. In this particular example, we will start by a known location for the project, then we will propose two different places to select the place and time that would minimize the effects of the project.\nThe first location will be located at the same spot as the northern end of the ferry.\n\n\nCode\ndredging_stressors &lt;- data.frame(\n  stressor = c(\"sedimentation\", \"habitat_destruction\", \"contaminants\"),\n  start_date = as.Date(c(\"2024-06-01\", \"2024-06-01\", \"2024-06-01\")), # Start of dredging period\n  end_date = as.Date(c(\"2024-08-31\", \"2024-08-31\", \"2024-08-31\")), # End of dredging period\n  intensity = c(1.0, 0.7, 0.5), # Relative intensity of each stressor\n  bandwidth = c(50, 20, 30) # Bandwidth for spatial distribution\n)\n\n# Define dredging activity locations\ndredging_locations &lt;- matrix(c(\n  650, 350 # , # Southern end of the ferry route\n  # 75, 75 # Public dock near the southern shoreline\n), ncol = 2, byrow = TRUE)\n\n# Simulate distribution and intensity for each stressor\ndredging_results &lt;- lapply(1:nrow(dredging_stressors), function(i) {\n  simulate_life_process(\n    centers = dredging_locations,\n    raster_grid = grd,\n    period = dredging_stressors[i, c(\"start_date\", \"end_date\")], # Stressor-specific period\n    time_steps = seq.Date(dredging_stressors$start_date[i], dredging_stressors$end_date[i], by = \"month\"),\n    n_samples = 100, # Number of disturbance points\n    bandwidth = dredging_stressors$bandwidth[i], # Stressor-specific bandwidth\n    prob_threshold = 0.05 # Probability threshold\n  )\n})\n\n# Combine all results into a single data frame\nplanned_dredging &lt;- lapply(seq_along(dredging_results), function(i) {\n  dredging_results[[i]]$ras_df |&gt;\n    dplyr::mutate(life_stage = dredging_stressors$stressor[i]) # Add stressor label\n}) |&gt;\n  dplyr::bind_rows() |&gt;\n  dplyr::mutate(activity = \"dredging_planned\") |&gt;\n  dplyr::rename(stressor_presence = presence, stressor = life_stage)\n\n# planned_dredging |&gt;\n#   dplyr::mutate(month = format(as.Date(date), \"%Y-%m\")) |&gt;\n#   dplyr::group_by(month, life_stage) |&gt;\n#   make_facets(\"Ferry operations intensity\")\n\n\n# Combined stressors\nst &lt;- dplyr::bind_rows(stressors, planned_dredging)\n\n# Risk\nrsk_all &lt;- dplyr::full_join(species, st, by = c(\"x\", \"y\", \"date\"), relationship = \"many-to-many\") |&gt;\n  na.omit() |&gt;\n  dplyr::left_join(sensitivity, by = c(\"stressor\", \"species\", \"life_stage\")) |&gt;\n  dplyr::mutate(risk = species_presence * stressor_presence * sensitivity) |&gt;\n  dplyr::filter(risk &gt; 0) |&gt;\n  dplyr::select(x, y, date, life_stage, species, stressor, activity, risk) |&gt;\n  dplyr::arrange(activity, stressor, date)\nknitr::kable(head(rsk_all))\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nx\ny\ndate\nlife_stage\nspecies\nstressor\nactivity\nrisk\n\n\n\n\n852.5\n292.5\n2024-04-01\nnatal\nlake_trout\ncontaminants\nagriculture\n0.0051136\n\n\n827.5\n287.5\n2024-04-01\nnatal\nlake_trout\ncontaminants\nagriculture\n0.0086039\n\n\n832.5\n287.5\n2024-04-01\nnatal\nlake_trout\ncontaminants\nagriculture\n0.0042208\n\n\n837.5\n287.5\n2024-04-01\nnatal\nlake_trout\ncontaminants\nagriculture\n0.0045455\n\n\n842.5\n287.5\n2024-04-01\nnatal\nlake_trout\ncontaminants\nagriculture\n0.0046266\n\n\n847.5\n287.5\n2024-04-01\nnatal\nlake_trout\ncontaminants\nagriculture\n0.0051136\n\n\n\n\n\nCode\n# Cumulative risk - integrated\nrskcum_int &lt;- rsk_all |&gt;\n  dplyr::group_by(date) |&gt;\n  dplyr::summarise(cum_risk = sum(risk)) |&gt;\n  dplyr::ungroup()\nrskcum_int &lt;- data.frame(\n  date = seq(as.Date(\"2024-01-01\"), as.Date(\"2024-12-31\"), by = \"month\") |&gt;\n    as.character()\n) |&gt;\n  dplyr::left_join(rskcum_int, by = \"date\") |&gt;\n  dplyr::mutate(\n    cum_risk = if_else(is.na(cum_risk), 0, cum_risk),\n    integrated = TRUE\n  )\nknitr::kable(rskcum_int)\n\n\n\n\n\ndate\ncum_risk\nintegrated\n\n\n\n\n2024-01-01\n0.0000\nTRUE\n\n\n2024-02-01\n0.0000\nTRUE\n\n\n2024-03-01\n0.0000\nTRUE\n\n\n2024-04-01\n278.1089\nTRUE\n\n\n2024-05-01\n919.3124\nTRUE\n\n\n2024-06-01\n484.9826\nTRUE\n\n\n2024-07-01\n255.2409\nTRUE\n\n\n2024-08-01\n247.2416\nTRUE\n\n\n2024-09-01\n117.8172\nTRUE\n\n\n2024-10-01\n108.5693\nTRUE\n\n\n2024-11-01\n129.6708\nTRUE\n\n\n2024-12-01\n122.6382\nTRUE\n\n\n\n\n\nCode\n# Cumulative risk - non-integrated\nrskcum_non_int &lt;- rsk_all |&gt;\n  dplyr::filter(activity == \"dredging_planned\") |&gt;\n  dplyr::group_by(date) |&gt;\n  dplyr::summarise(cum_risk = sum(risk)) |&gt;\n  dplyr::ungroup()\nrskcum_non_int &lt;- data.frame(\n  date = seq(as.Date(\"2024-01-01\"), as.Date(\"2024-12-31\"), by = \"month\") |&gt;\n    as.character()\n) |&gt;\n  dplyr::left_join(rskcum_non_int, by = \"date\") |&gt;\n  dplyr::mutate(\n    cum_risk = if_else(is.na(cum_risk), 0, cum_risk),\n    integrated = FALSE\n  )\nknitr::kable(rskcum_non_int)\n\n\n\n\n\ndate\ncum_risk\nintegrated\n\n\n\n\n2024-01-01\n0.00000\nFALSE\n\n\n2024-02-01\n0.00000\nFALSE\n\n\n2024-03-01\n0.00000\nFALSE\n\n\n2024-04-01\n0.00000\nFALSE\n\n\n2024-05-01\n0.00000\nFALSE\n\n\n2024-06-01\n30.11988\nFALSE\n\n\n2024-07-01\n23.09362\nFALSE\n\n\n2024-08-01\n20.48776\nFALSE\n\n\n2024-09-01\n0.00000\nFALSE\n\n\n2024-10-01\n0.00000\nFALSE\n\n\n2024-11-01\n0.00000\nFALSE\n\n\n2024-12-01\n0.00000\nFALSE\n\n\n\n\n\nCode\n# Bind together\nrskcum &lt;- dplyr::bind_rows(rskcum_int, rskcum_non_int) |&gt;\n  dplyr::mutate(date = lubridate::as_date(date))\n\n# Timing windows\n## Integrated\nwindow &lt;- 1\ntw &lt;- rbind(\n  calculate_optimal_timing(rskcum_int,\n    window_size = window,\n    period_start = \"2024-06-01\",\n    period_end = \"2024-08-31\",\n    wrap = TRUE\n  ),\n  calculate_optimal_timing(rskcum_non_int,\n    window_size = window,\n    period_start = \"2024-06-01\",\n    period_end = \"2024-08-31\",\n    wrap = TRUE\n  )\n)\n\n# Visualize\nplot_cumulative_risk(risk_data = rskcum, timing_data = tw)\n\n\n\n\n\n\n\n\n\n\n4. Explore Optimization Approaches - Time Optimization: - Use a sliding window to identify periods with minimal risk for interventions (e.g., spawning windows). - Explore tools like zoo::rollapply or RcppRoll for rolling calculations. - Space Optimization: - Identify low-risk areas using spatial clustering or graph-based methods (e.g., terra for raster operations or igraph for connectivity). - Space-Time Optimization: - Combine the outputs of spatial and temporal analyses to identify optimal windows in both dimensions. - Use spatio-temporal clustering algorithms like DBSCAN or create dynamic risk maps.\n\n5. Build a Conceptual Figure - Design Elements: - Layer 1: Temporal risk trends (e.g., a line chart showing risk over time). - Layer 2: Spatial risk distribution (e.g., a heatmap or risk surface). - Layer 3: Combined spatio-temporal dynamics (e.g., a time-series of maps or 3D surface plot). - Tools for Figure: - Use ggplot2 for basic visualizations or leaflet/sf for spatial data. - For conceptual illustrations, use tools like PowerPoint, Illustrator, or Inkscape.\n\n6. Iterate with Simplified Data - Start with simplified data to validate the framework and ensure calculations are accurate. - Once confident in the approach, scale up to include the full set of species, life processes, and stressors.\n\n7. Document Insights - For each optimization dimension (time, space, space-time), record: - The methods used. - Key findings (e.g., optimal timing windows or spatial hotspots). - How these findings align with the fictitious example.\n\n8. Refine and Finalize Outputs - Fine-tune the risk assessment and optimization results. - Create polished versions of the conceptual figure and any supplementary visualizations. - Ensure all insights are directly tied back to the fictitious example for clarity and relevance.\n\n9. Validate the Workflow - Conduct a quick peer review or self-check to ensure the logic of the example aligns with the proposed framework. - Adjust any methods or figures based on feedback or additional insights.\nThis structured workflow ensures you make steady progress on the fish example while systematically exploring optimization approaches and developing a clear conceptual figure. Let me know if you’d like detailed help with any step!",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Freshwater stream</span>"
    ]
  }
]